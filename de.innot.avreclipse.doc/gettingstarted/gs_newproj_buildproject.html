<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">

<head>
	<meta http-equiv="Content-Language" content="en-us">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Building the AVR Project</title>
	<link rel="stylesheet" type="text/css" href="../book.css">
</head>

<body>

<h1>Building the Project</h1>

<p>Once we have created a project and populated it with a sample C file, it can now be build.</p>

<ol><li>
  <p>Check that the automatic build option is turned off. Otherwise the project is rebuild everytime a source file is saved which might take some time (depending on project size and processor speed).</p>
  <br>
  <img src="images/gs_build_1.png" alt=""><br>
  <br>
</li>
  <li>With auto-build switched off, it makes sense to have Eclipse save all open files when the project is build.<br>
  Open the Preferences (<strong>Window</strong> -&gt; <strong>Preferences...</strong>) and go the the <strong>General</strong> -&gt; <strong>Workspace</strong> tab, then set the <strong>Save automatically before build</strong> option.<br>
      <img src="images/gs_build_5.png" alt=""><br>
      <br>
    <br>
  </li>
  <li>Right click on the <strong>AVRtest</strong> Project in the Project Explorer and select <strong>Build Project</strong>.<br>
    <br>
  The project is build with Debug configuration (which is the default configuration). The log of the build process is shown in the Console View and should look something like this:<br>
    <pre class="codeblock">
**** Build of configuration Debug for project AVRtest ****

make all 
Building file: ../main.c
Invoking: AVR Compiler
avr-gcc -Wall -g2 -gstabs -O0 -fpack-struct -fshort-enums -funsigned-char -funsigned-bitfields -mmcu=atmega16 
 -DF_CPU=1000000UL -MMD -MP -MF&quot;main.d&quot; -MT&quot;main.d&quot; -c -o&quot;main.o&quot; &quot;../main.c&quot;
Finished building: ../main.c
 
Building target: AVRtest.elf
Invoking: AVR C Linker
avr-gcc -Wl,-Map,AVRtest.map -mmcu=atmega16 -o&quot;AVRtest.elf&quot;  ./main.o   
Finished building target: AVRtest.elf
 
Invoking: AVR Create Extended Listing
avr-objdump -h -S AVRtest.elf  &gt;&quot;AVRtest.lss&quot;
Finished building: AVRtest.lss
 
Invoking: Print Size
avr-size --format=avr --mcu=atmega16 AVRtest.elf
AVR Memory Usage
----------------
Device: atmega16

Program:     160 bytes (1.0% Full)
(.text + .data + .bootloader)

Data:          0 bytes (0.0% Full)
(.data + .bss + .noinit)
Finished building: sizedummy
</pre>
    <strong>Note</strong>: The format option --format=avr for the <em>AVR Print Size</em> tool is not available on all platforms.<br>
    <br>
  </li>
  <li>Within your project folder two new folders have appeared, <strong>Binaries</strong> and <strong>Debug</strong>.<br>
      <br>
      <table width="90%" border="0">
        <tr>
          <td valign="top">The <strong>Debug</strong> folder contains all generated files:<br>
            <br>
            <ul>
              <li><strong>makefile</strong>: a makefile automatically generated by the build process.</li>
              <li><strong>*.mk</strong>: Automatically generated files required for the build process.</li>
              <li><strong>main.o</strong>: Object file containing the compiled code from main.c-</li>
              <li><strong>AVRtest.lss</strong>: A text file with a mixture of the original C source with the assembler output from the compiler.</li>
              <li><strong>AVRtest.elf</strong>: ELF format file containing the compiled application. This file can be used for most available AVR Simulators (like simulavr).</li>
            </ul>
          <p>The (virtual) folder <strong>Binaries</strong> contains a link to the generated elf file in the <strong>Debug</strong> folder.</p></td>
          <td><img src="images/gs_build_2.png" alt=""></td>
        </tr>
      </table>
      <br></li>
  </ol>
<p>
<a href="gs_newproj_changeconfig.html" style="text-decoration: none">
  <img src="../images/ngnext.gif" alt="" width="16" height="16" border="0" align="absmiddle"></a>
  <b><a href="gs_newproj_changeconfig.html">
  Next: Changing the Build Configuration</a><a href="gs_newproj_changeconfig.html" style="text-decoration: none"> </a>  </b></p>
<p align="left">

<a href="gs_newproj_cfile.html">
<img src="../images/ngback.gif" alt="" width="16" height="16" border="0" align="absmiddle"></a> <b><a href="gs_newproj_cfile.html">Back: Creating a sample AVR C file</a></b> </p>
<p class="copyright">&copy; 2007, 2008 Thomas Holland</p>

</body>

</html>